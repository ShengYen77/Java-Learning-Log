## ⭐HTTP 方法的「安全性」與「冪等性」概念

# 什麼是「安全(Safe)」?

Safe 表示：該 HTTP 方法 **只用來讀取資料，不會改變伺服器上的資源狀態**。

安全方法：GET、HEAD、OPTIONS

非安全方法：POST、PUT、DELETE

換句話說，如果你不小心按了 F5（重新整理），不該導致資料異動。

這就是安全操作的基本原則。

# 什麼是「安全(Safe)」?

Idempotent 表示：相同的請求執行一次或多次，伺服器的狀態都會一樣。

舉例來說：

- DELETE /users/1

  執行一次會刪除用戶 1
  
  執行十次，結果仍是「用戶 1 被刪除」——結果不會變。

- PUT /users/1（帶相同資料）
  
  執行一次或多次，都是把 user 1 的資料更新成相同內容。

| HTTP 方法 | 安全（Safe） | 冪等（Idempotent） | 說明              |
| ------- | -------- | -------------- | --------------- |
| GET     | 是      | 是            | 查詢資料，無副作用       |
| POST    | 否      | 否            | 每次請求可能建立不同資源    |
| PUT     | 否      | 是            | 每次請求會將資料覆蓋成相同狀態 |
| DELETE  | 否      | 是            | 多次刪除請求結果一致      |
| PATCH   | 否      | 否（有時是）       | 視實作而定，通常不被視為冪等  |

補充知識 :

安全 ≠ 不會被記錄！像 GET 請求也可以被記錄或緩存（例如 Google Analytics）。

冪等 ≠ 無副作用！例如 DELETE 雖然是冪等的，但它的副作用（刪除資料）是真實發生的。
